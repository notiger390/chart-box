<div class="line-chart-container">
  <div
    echarts
    [options]="chartOptions()"
    (chartInit)="onChartInit($event)"
    (chartClick)="onChartClick($event)"
    class="chart">
  </div>

  <div class="control-panel">
    <h3>コントロールパネル</h3>

    <div class="control-section">
      <h4>系列の表示設定</h4>
      <div class="control-group">
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="showSeries1">
          製品A
        </label>
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="showSeries2">
          製品B
        </label>
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="showSeries3">
          製品C
        </label>
      </div>
    </div>

    <div class="control-section">
      <h4>ラインスタイル</h4>
      <div class="control-group">
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="smooth">
          スムーズな線
        </label>
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="showArea">
          塗りつぶし（グラデーション）
        </label>
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="showSymbol">
          シンボルを表示
        </label>
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="showLabel">
          値ラベルを表示
        </label>
      </div>

      <div class="control-row">
        <label>
          線の太さ:
          <input type="range" min="1" max="10" [(ngModel)]="lineWidth">
          <span>{{ lineWidth() }}px</span>
        </label>
      </div>

      <div class="control-row">
        <label>
          線の種類:
          <select [(ngModel)]="lineType">
            <option value="solid">実線</option>
            <option value="dashed">破線</option>
            <option value="dotted">点線</option>
          </select>
        </label>
      </div>

      @if (showSymbol()) {
        <div class="control-row">
          <label>
            シンボルの形状:
            <select [(ngModel)]="symbolType">
              <option value="circle">円</option>
              <option value="rect">四角形</option>
              <option value="roundRect">角丸四角形</option>
              <option value="triangle">三角形</option>
              <option value="diamond">ひし形</option>
              <option value="pin">ピン</option>
              <option value="arrow">矢印</option>
            </select>
          </label>
        </div>

        <div class="control-row">
          <label>
            シンボルサイズ:
            <input type="range" min="4" max="20" [(ngModel)]="symbolSize">
            <span>{{ symbolSize() }}</span>
          </label>
        </div>
      }

      @if (showArea()) {
        <div class="control-row">
          <label>
            グラデーションの不透明度:
            <input type="range" min="0.1" max="0.8" step="0.1" [(ngModel)]="gradientOpacity">
            <span>{{ gradientOpacity() }}</span>
          </label>
        </div>
      }
    </div>

    <div class="control-section">
      <h4>マーカーと注釈</h4>
      <div class="control-group">
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="showMarkPoint">
          マークポイント（最大・最小）を表示
        </label>
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="showMarkLine">
          マークライン（平均・目標）を表示
        </label>
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="showMarkArea">
          マークエリア（第1四半期ピーク）を表示
        </label>
      </div>
    </div>

    <div class="control-section">
      <h4>インタラクティブ機能</h4>
      <div class="control-group">
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="enableDataZoom">
          データズームを有効化
        </label>
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="enableToolbox">
          ツールボックスを表示
        </label>
        <label class="checkbox-label">
          <input type="checkbox" [(ngModel)]="animationEnabled">
          アニメーションを有効化
        </label>
      </div>

      <div class="control-row">
        <label>
          ツールチップのトリガー:
          <select [(ngModel)]="tooltipTrigger">
            <option value="axis">軸</option>
            <option value="item">項目</option>
            <option value="none">なし</option>
          </select>
        </label>
      </div>
    </div>

    <div class="control-section">
      <h4>凡例の設定</h4>
      <div class="control-row">
        <label>
          位置:
          <select [(ngModel)]="legendPosition">
            <option value="top">上部</option>
            <option value="bottom">下部</option>
            <option value="left">左</option>
            <option value="right">右</option>
          </select>
        </label>
        <label>
          方向:
          <select [(ngModel)]="legendOrient">
            <option value="horizontal">横並び</option>
            <option value="vertical">縦並び</option>
          </select>
        </label>
      </div>
    </div>

    <div class="control-section">
      <h4>アクション</h4>
      <div class="button-group">
        <button class="action-button" (click)="updateData()">
          🔄 データ更新
        </button>
        <button class="action-button" (click)="exportChart()">
          💾 PNGとして保存
        </button>
      </div>
    </div>
  </div>
</div>